<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Learning App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #4CAF50;
            padding: 10px;
            color: white;
            display: flex;
            align-items: center;
        }
        nav {
            display: flex;
            align-items: center;
        }
        select {
            margin-left: 10px;
            padding: 5px;
        }
        .card {
            width: 300px;
            height: auto;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin: 20px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #555;
            padding: 20px;
        }
        .hidden {
            display: none;
        }
        .red {
            color: red;
        }
        .gray {
            color: gray;
        }
        input {
            margin-top: 10px;
            padding: 5px;
            width: 80%;
        }
    </style>
</head>
<body>

<header>
    <nav>
        <label for="mode">Mode:</label>
        <select id="mode">
            <option value="insert" selected>Insert word</option>
            <option value="translate">Translate</option>
            <option value="conjugate">Conjugate</option>
        </select>

        <label for="language">Language:</label>
        <select id="language">
            <option value="en-sp" selected>EN-SP</option>
            <option value="sp-en">SP-EN</option>
            <option value="ru-en">RU-EN</option>
            <option value="en-ru">EN-RU</option>
        </select>
    </nav>
</header>

<div class="card">
    <span class="sentence"></span>
    <span class="translation hidden"></span>
    <input type="text" id="userInput" placeholder="Your guess here">
    <button id="submitBtn">Submit</button>
    <div id="message"></div>
    <div class="counter">
        <span>Total Words: <span id="totalWords">0</span></span><br>
        <span>Correct Answers: <span id="correctCount">0</span></span><br>
        <span>Incorrect Answers: <span id="incorrectCount">0</span></span>
    </div>
</div>

<script>
    const dictionary = {
        "en": [
            {
                "word": "breakfast",
                "sentence": "She enjoyed a big __breakfast__ before heading out to work.",
                "translations": {
                    "ru": {"translation": "завтрак", "score": 0},
                    "sp": {"translation": "el desayuno", "score": 0}
                }
            }, {
                "word": "dinner",
                "sentence": "We are having __dinner__ with friends tonight.",
                "translations": {
                    "ru": {"translation": "ужин", "score": 0},
                    "sp": {"translation": "la cena", "score": 0}
                }
            }
        ],
        "sp": [
            {
                "word": "el desayuno",
                "sentence": "__El desayuno__ es la comida más importante del día",
                "translations": {
                    "en": {"translation": "breakfast", "score": 0},
                    "ru": {"translation": "завтрак", "score": 0}
                }
            }, {
                "word": "la cena",
                "sentence": "__La cena__ estuvo deliciosa anoche.",
                "translations": {
                    "en": {"translation": "dinner", "score": 0},
                    "ru": {"translation": "ужин", "score": 0}
                }
            }
        ],
        "ru": [
            {
                "word": "завтрак",
                "sentence": "Он всегда пьёт кофе на __завтрак__.",
                "translations": {
                    "en": {"translation": "breakfast", "score": 0},
                    "sp": {"translation": "desayuno", "score": 0}
                }
            }, {
                "word": "ужин",
                "sentence": "Мы приготовили вкусный __ужин__.",
                "translations": {
                    "en": {"translation": "dinner", "score": 0},
                    "sp": {"translation": "cena", "score": 0}
                }
            }
        ]
    };

    let totalWords = 0;
    let correctCount = 0;
    let incorrectCount = 0;
    let currentWord = '';
    const modeSelect = document.getElementById('mode');
    const languageSelect = document.getElementById('language');
    const sentenceSpan = document.querySelector('.sentence');
    const translationSpan = document.querySelector('.translation');
    const userInput = document.getElementById('userInput');
    const messageDiv = document.getElementById('message');

    function selectRandomEntry(language) {
        const entries = dictionary[language];
        const randomIndex = Math.floor(Math.random() * entries.length);
        return entries[randomIndex];
    }

    function displayContent(entry) {
        if (modeSelect.value === 'insert') {
            sentenceSpan.innerHTML = entry.sentence.replace(`__${entry.word}__`, `<span class="gray">${entry.translations[languageSelect.value.slice(0, 2)].translation}</span>`);
            currentWord = entry.word;
            translationSpan.classList.add('hidden');
        } else if (modeSelect.value === 'translate') {
            sentenceSpan.innerHTML = entry.sentence.replace(/__(.*?)__/g, `<span class="red">$1</span>`);
            currentWord = entry.word;
            translationSpan.innerHTML = `Translation: ${entry.translations[languageSelect.value.slice(0, 2)].translation}`;
            translationSpan.classList.remove('hidden');
        } else {
            sentenceSpan.innerHTML = "Not implemented yet";
            translationSpan.classList.add('hidden');
        }
        totalWords++;
        updateCounters();
    }

    function updateCounters() {
        document.getElementById('totalWords').innerText = totalWords;
        document.getElementById('correctCount').innerText = correctCount;
        document.getElementById('incorrectCount').innerText = incorrectCount;
    }

    function submitAnswer() {
        const userAnswer = userInput.value.toLowerCase().trim();
        if (userAnswer === currentWord.toLowerCase()) {
            messageDiv.innerText = "Correct!";
            correctCount++;
        } else {
            messageDiv.innerText = `Incorrect! The correct word was: ${currentWord}`;
            incorrectCount++;
        }
        updateCounters();
        userInput.value = '';
        loadNewContent();
    }

    function loadNewContent() {
        const language = modeSelect.value === 'conjugate' ? languageSelect.value.slice(0, 2) : languageSelect.value.slice(0, 2);
        const entry = selectRandomEntry(language);
        displayContent(entry);
    }

    modeSelect.addEventListener('change', function() {
        loadNewContent();
        if (this.value === 'conjugate') {
            languageSelect.innerHTML = `
                <option value="en">EN</option>
                <option value="sp">SP</option>
                <option value="ru">RU</option>
            `;
        } else {
            languageSelect.innerHTML = `
                <option value="en-sp" selected>EN-SP</option>
                <option value="sp-en">SP-EN</option>
                <option value="ru-en">RU-EN</option>
                <option value="en-ru">EN-RU</option>
            `;
        }
    });

    languageSelect.addEventListener('change', loadNewContent);
    document.getElementById('submitBtn').addEventListener('click', submitAnswer);

    // Initial content load
    loadNewContent();
</script>

</body>
</html>

